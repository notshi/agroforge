cd `dirname $0`


echo "creating new orphan branch"

rm -rf docs
git clone git@github.com:notshi/agroforge.git docs --no-checkout


cd docs
git branch -D gh-pages
git checkout --orphan gh-pages
git rm -rf .
rm .gitignore
cd ..


echo "building and publishing"

./build
cd docs
git --git-dir ./.git add .
git --git-dir ./.git commit -m.
git --git-dir ./.git push --set-upstream origin -f gh-pages
cd ..

echo "restoring original"

rm -rf docs

git pull
./build


